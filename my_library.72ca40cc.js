var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},n=e.parcelRequire23fa;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){o[e]=t},e.parcelRequire23fa=n);var r=n("1dkLo");n("5uEKZ");var d,i=n("jPzW1"),c=[],u=[],s=[],a=!0;function l(){m(f);const e=document.querySelector(".clear-btn");if(e.innerText="CLEAR WATCHED LIST",c.length>0)(0,r.renderMoviesList)(c);else{document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!'}e.addEventListener("click",v)}function v(){a?(console.log("clear watched list"),c=[],(0,i.uploadWatchedQueuedMoviesToDB)("watched",c)):(console.log("clear queue list"),u=[],(0,i.uploadWatchedQueuedMoviesToDB)("queued",u));document.querySelector(".movies-div").innerHTML=""}function m(e){e.classList.add("active")}function y(e){e.classList.remove("active")}document.addEventListener("DOMContentLoaded",(async function(){(0,i.downloadWatchedQueuedMoviesFromDB)(),await new Promise((e=>{setTimeout((()=>{e(function(){try{const e=i.itemAccess.data();if(console.log(e),void 0===e)return(0,i.downloadWatchedQueuedMoviesFromDB)(),void l();const t=Object.keys(e).length;if(console.log(t),0===t||void 0===e.queuedMovies||void 0===e.watchedMovies)return void l();const o=e.queuedMovies.length,n=e.watchedMovies.length,r=e.watchedMovies,d=e.queuedMovies;if(console.log(o),0!==o&&"[]"!==d){const t=e.queuedMovies[0];u=JSON.parse(t)}if(0!==n&&"[]"!==r){const t=e.watchedMovies[0];c=JSON.parse(t)}l(),console.log("You movies saved in watched are:",c,"and queued are: ",u)}catch(e){console.log("I couldn't load the data from the database, because: ",e)}}())}),1e3)}))}));const f=document.querySelector(".watched-btn"),h=document.querySelector(".queue-btn");f.addEventListener("click",(function(){m(f),y(h),a=!0,document.querySelector(".clear-btn").innerText="CLEAR WATCHED LIST";const e=document.querySelector(".error-message");if(0!==c.length)e.innerText="",(0,r.renderMoviesList)(c);else{e.innerText='Oops! Your "watched" library is empty!';document.querySelector(".movies-div").innerHTML=""}})),h.addEventListener("click",(function(){m(h),y(f),a=!1,document.querySelector(".clear-btn").innerText="CLEAR QUEUE LIST";const e=document.querySelector(".error-message");if(0!==u.length)e.innerText="",(0,r.renderMoviesList)(u);else{e.innerText='Oops! Your "queue" library is empty!';document.querySelector(".movies-div").innerHTML=""}}));const q=document.getElementById("closeModalBtn2"),p=document.querySelector(".bckdrp");q.addEventListener("click",(function(){p.style.display="none"})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(p.style.display="none")})),p.addEventListener("click",(function(e){e.target===p&&(p.style.display="none")}));const L=document.querySelector(".wbtn2"),M=document.querySelector(".qbtn2");L.addEventListener("click",(function(){if(d.watched){d.watched=!1,L.innerHTML="Add to watched";let e=c.findIndex((e=>e.id===d.id));c.splice(e,1),u.forEach((e=>{!0===e.queued&&!0===e.watched&&(e.watched=!1)}))}else L.innerHTML="Remove from watched",d.watched=!0,c.push(d);if((0,i.uploadWatchedQueuedMoviesToDB)("watched",c),(0,i.uploadWatchedQueuedMoviesToDB)("queued",u),0===c.length){document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!'}a?(0,r.renderMoviesList)(c):(0,r.renderMoviesList)(u)})),M.addEventListener("click",(function(){if(d.queued){d.queued=!1,M.innerHTML="Add to queue";let e=u.findIndex((e=>e.id===d.id));u.splice(e,1),c.forEach((e=>{!0===e.queued&&!0===e.watched&&(e.queued=!1)}))}else M.innerHTML="Remove from queue",d.queued=!0,u.push(d);if((0,i.uploadWatchedQueuedMoviesToDB)("queued",u),(0,i.uploadWatchedQueuedMoviesToDB)("watched",c),0===u.length){document.querySelector(".error-message").innerText='Oops! Your "queue" library is empty!'}a?(0,r.renderMoviesList)(c):(0,r.renderMoviesList)(u)}));document.querySelector(".movdiv2").addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;s=a?c:u;const t=e.target.attributes[0].value;var o=s.findIndex((e=>t-e.id==0));const n=document.querySelector(".title-film"),r=document.querySelector(".movie-poster"),i=document.querySelector(".vote"),l=document.querySelector(".votes"),v=document.querySelector(".popularity"),m=document.querySelector(".title"),y=document.querySelector(".genres"),f=document.querySelector(".description-text");d=s[o],n.innerHTML=d.title,r.src=d.poster_path,i.innerHTML=d.vote_average,l.innerHTML=" / "+d.vote_count,v.innerHTML=d.popularity,m.innerHTML=d.original_title,y.innerHTML=d.genres,f.innerHTML=d.overview,d.watched?L.innerHTML="Remove from watched":L.innerHTML="Add to watched";d.queued?M.innerHTML="Remove from queue":M.innerHTML="Add to queue";p.style.display="block"}));
//# sourceMappingURL=my_library.72ca40cc.js.map
