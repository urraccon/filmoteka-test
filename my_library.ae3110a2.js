var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=e.parcelRequire23fa;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var o=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,o.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire23fa=o);var r=o("1dkLo");o("5uEKZ");var i,d=o("jPzW1"),u=[],c=[],s=[],a=!0;function l(){m(y);const e=document.querySelector(".clear-btn");if(e.innerText="CLEAR WATCHED LIST",u.length>0)(0,r.renderMoviesList)(u);else{document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!'}e.addEventListener("click",v)}function v(){a?(console.log("clear watched list"),u=[],(0,d.uploadWatchedQueuedMoviesToDB)("watched",u)):(console.log("clear queue list"),c=[],(0,d.uploadWatchedQueuedMoviesToDB)("queued",c));document.querySelector(".movies-div").innerHTML=""}function m(e){e.classList.add("active")}function f(e){e.classList.remove("active")}document.addEventListener("DOMContentLoaded",(async function(){(0,d.downloadWatchedQueuedMoviesFromDB)(),await new Promise((e=>{setTimeout((()=>{e(function(){try{const e=d.itemAccess.data();if(void 0===e)return(0,d.downloadWatchedQueuedMoviesFromDB)(),void l();if(0===Object.keys(e).length||void 0===e.queuedMovies||void 0===e.watchedMovies)return void l();const t=e.queuedMovies.length,n=e.watchedMovies.length,o=e.watchedMovies,r=e.queuedMovies;if(0!==t&&"[]"!==r){const t=e.queuedMovies[0];c=JSON.parse(t)}if(0!==n&&"[]"!==o){const t=e.watchedMovies[0];u=JSON.parse(t)}l(),console.log("I found more movies in the watched movies list: ",u,"and in the queued movies list: ",c)}catch(e){console.log("I couldn't load the data from the database, because: ",e)}}())}),1e3)}))}));const y=document.querySelector(".watched-btn"),h=document.querySelector(".queue-btn");y.addEventListener("click",(function(){m(y),f(h),a=!0,document.querySelector(".clear-btn").innerText="CLEAR WATCHED LIST";const e=document.querySelector(".error-message");if(0!==u.length)e.innerText="",(0,r.renderMoviesList)(u);else{e.innerText='Oops! Your "watched" library is empty!';document.querySelector(".movies-div").innerHTML=""}})),h.addEventListener("click",(function(){m(h),f(y),a=!1,document.querySelector(".clear-btn").innerText="CLEAR QUEUE LIST";const e=document.querySelector(".error-message");if(0!==c.length)e.innerText="",(0,r.renderMoviesList)(c);else{e.innerText='Oops! Your "queue" library is empty!';document.querySelector(".movies-div").innerHTML=""}}));const q=document.getElementById("closeModalBtn2"),p=document.querySelector(".bckdrp");q.addEventListener("click",(function(){p.style.display="none"})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(p.style.display="none")})),p.addEventListener("click",(function(e){e.target===p&&(p.style.display="none")}));const L=document.querySelector(".wbtn2"),M=document.querySelector(".qbtn2");L.addEventListener("click",(function(){if(i.watched){i.watched=!1,L.innerHTML="Add to watched";let e=u.findIndex((e=>e.id===i.id));u.splice(e,1),c.forEach((e=>{!0===e.queued&&!0===e.watched&&(e.watched=!1)}))}else L.innerHTML="Remove from watched",i.watched=!0,u.push(i);if((0,d.uploadWatchedQueuedMoviesToDB)("watched",u),(0,d.uploadWatchedQueuedMoviesToDB)("queued",c),0===u.length){document.querySelector(".error-message").innerText='Oops! Your "watched" library is empty!'}a?(0,r.renderMoviesList)(u):(0,r.renderMoviesList)(c)})),M.addEventListener("click",(function(){if(i.queued){i.queued=!1,M.innerHTML="Add to queue";let e=c.findIndex((e=>e.id===i.id));c.splice(e,1),u.forEach((e=>{!0===e.queued&&!0===e.watched&&(e.queued=!1)}))}else M.innerHTML="Remove from queue",i.queued=!0,c.push(i);if((0,d.uploadWatchedQueuedMoviesToDB)("queued",c),(0,d.uploadWatchedQueuedMoviesToDB)("watched",u),0===c.length){document.querySelector(".error-message").innerText='Oops! Your "queue" library is empty!'}a?(0,r.renderMoviesList)(u):(0,r.renderMoviesList)(c)}));document.querySelector(".movdiv2").addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;s=a?u:c;const t=e.target.attributes[0].value;var n=s.findIndex((e=>t-e.id==0));const o=document.querySelector(".title-film"),r=document.querySelector(".movie-poster"),d=document.querySelector(".vote"),l=document.querySelector(".votes"),v=document.querySelector(".popularity"),m=document.querySelector(".title"),f=document.querySelector(".genres"),y=document.querySelector(".description-text");i=s[n],o.innerHTML=i.title,r.src=i.poster_path,d.innerHTML=i.vote_average,l.innerHTML=" / "+i.vote_count,v.innerHTML=i.popularity,m.innerHTML=i.original_title,f.innerHTML=i.genres,y.innerHTML=i.overview,i.watched?L.innerHTML="Remove from watched":L.innerHTML="Add to watched";i.queued?M.innerHTML="Remove from queue":M.innerHTML="Add to queue";p.style.display="block"}));
//# sourceMappingURL=my_library.ae3110a2.js.map
